
<html>

<head>
    <title>MidiView</title>

	<link rel="stylesheet" href="css/blueprint/reset.css" />
	<link rel="stylesheet" href="css/blueprint/typography.css" />
	<link rel="stylesheet" href="css/midiview.css" />

    <script src="lib/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="lib/underscore-min.js" type="text/javascript"></script>
    <script src="lib/backbone-min.js" type="text/javascript"></script>

	<script src="js/midi.reader.js" type="text/javascript"></script>
	<script src="js/midi.reader.lib.js" type="text/javascript"></script>
	<script src="js/midi.writer.js" type="text/javascript"></script>
	<script src="js/midi.util.stream.js" type="text/javascript"></script>

	<script src="js/midi.enums.notes.js" type="text/javascript"></script>
	<script src="js/midi.enums.percussion.js" type="text/javascript"></script>
	<script src="js/midi.enums.instruments.js" type="text/javascript"></script>
	<script src="js/midi.enums.controllers.js" type="text/javascript"></script>
	<script src="js/midi.enums.events.js" type="text/javascript"></script>

	<script src="js/midi.views.event.js" type="text/javascript"></script>
	<script src="js/midi.views.info.js" type="text/javascript"></script>

</head>

<body>
	<div class="column">

		<table class="events">
			<thead>
                <th width="30">&#916;</th>
				<th width="15">T</th>
				<th width="15">C</th>
				<th width="60">Type</th>								
				<th width="30">Data</th>
				<th width="70"></th>
			</thead>
		</table>
	</div>

	<div class="column">
		<div class="info">
			<label>File Name:</label><span class="fileName"></span><br/>
			<label>Format:</label><span class="formatType"></span>
			<label>Tracks:</label><span class="trackCount"></span>
			<label>Time:</label><span class="timeSig"></span><br/>
			<label>BeatsPerMin:</label><span class="beatsPerMin"></span>
			<label>TicksPerBeat:</label><span class="ticksPerBeat"></span></br>
			<label>McsPerBeat:</label><span class="mcsPerBeat"></span>
			<label>TicksPerMin:</label><span class="ticksPerMin"></span></br>
			<label>McsPerTick:</label><span class="mcsPerTick"></span>
			<label>MlsPerTick:</label><span class="mlsPerTick"></span>
		</div>
	</div>

	<script type="text/javascript">

	    $(function () {

	        var infoView = new Midi.Views.InfoView({ el: ".info" })
	        var eventView = new Midi.Views.EventView({ el: ".events" });

	        //var b64 = "TVRoZAAAAAYAAQACAeBNVHJrAAAAEwD/WAQEAhgIAP9RAwYagAD/LwBNVHJrAAAAQwDJAQCJI38AmSN/eIkjfwAjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjf3gjfwD/LwA=";

			//var b64 = "TVRoZAAAAAYAAAABAIBNVHJrAAAAFgCQPFqBAIA8WgCQPlqBAIA+WgD/LwA="
			
			 var b64 = "TVRoZAAAAAYAAQABAPBNVHJrAAAAlQD/ARBQb3dlcmVkIGJ5IE1pZGlvAP8CCUpTRmFuYXRpYwD/Aw1Mb3ZlIFdyYW5nbGVyAP8ECEtleWJvYXJkAP8FEE9oaCBiYWJ5IHllYWguLi4A/wYFSW50cm8A/wcHRGFuY2VycwD/UQMGGoAA/1gEBgMYCACQPFqBAIA8WgCwB4AAoD5AAMAkANB/AP8gAQoA/y8A"

			var binaryIn = window.atob(b64);


	        var midi = Midi.Reader.loadBinary(binaryIn);

			var binaryOut = Midi.Writer.write(midi);

			console.log(binaryIn);
			console.log(binaryOut);

			console.log(binaryIn == binaryOut);

			console.log(window.btoa(binaryIn));
			console.log(window.btoa(binaryOut));


			console.log(b64);
			console.log(window.btoa(binaryOut));

			console.log(midi);

			//var midiOut = Midi.File.loadBinary(binaryOut);

			infoView.render(midi);
	        eventView.render(midi);

	        //infoView.render(midiOut);
	        //eventView.render(midiOut);

	    });


	</script>

</body>

</html>